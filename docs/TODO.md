### TODO.md - The TO-DO list
When one of these is implemented, tested and confirmed by the user, check the box to indicate it is complete.

LDD stands for Left for Developer/Designer to Decide. In other words, I don't care about this particular detail, so use your best engineering judgment to pick the best way and keep going.

1. [x] From this point forward, when Claude makes changes, it should run `git commit` with a descriptive commit message. Update CLAUDE.md accordingly.
2. [x] Sometimes `joke-pipeline.py --status` returns an error because it can't access a file (probably because it was moved). Make the script handle this properly.
3. [x] Make stage scripts check for the presence of the file `[project directory]/ALL_STOP` before starting work on the next file in it's stage queue. If that file exists, it should exit gracefully. When`joke-pipeline.py` is first started (before the main loop), it should check for that file and delete it if it exists. The name and path to `ALL_STOP` should set in `config.py`.
4. [x] When a script is operating on a file, the file remains in the stage directory. Prefer it was moved to the `[stage]/tmp/` directory so it won't get picked up by another script. (Preparation for multiple concurrent stage handlers.)
5. [x] When a script is operating on a file, make it write the joke ID to a status file (name LDD) in the stage directory. When it is done with that file it deletes the file, or just makes it empty (LDD). Change `joke-pipeline.py --status` to display main and prior pipelines in one column so there's more room to the right and display the ID from the status file next to the pipeline stage name and counts.
6. [x] When a script moves a joke to one of the reject stage directories, append the joke ID and the reason given (on one line) to a `logs/[main|pri]_reject_[stage]_failure.log` file. No need for a timestamp or other details. You can use the logging module, or another way (LDD)
7. [x] Deduplicate the categories in `docs/joke-categories.md` favoring categories containing ':'. Remove the trailing "Jokes" from the categories to better align with categories defined in `config.py`. Pull the VALID_CATEGORIES out of `config.py` and put them in a separate `joke-categories.py` file. Merge in the categories from `docs/joke-categories.md` into VALID_CATEGORIES. Make code, test and documentation changes to use VALID_CATEGORIES in `joke-categories.py`.
8. [x] We already bumped the max number of categories we allow from 3 to 10. Change the handling of categories: 1. if the AI gives you more than the max, ignore any that are not in VALID_CATEGORIES, then just take the first MAX_CATEGORIES_PER_JOKE from the front of the list and ignore the rest. Log a warning and list any suggested category not in VALID_CATEGORIES and any ignored categories.

